namespaces:
  - name: main
    format: '$remote_addr - $remote_user [$time_local] "$request" $status $body_bytes_sent "$http_referer" "$http_user_agent" $request_time'
    source:
      files:
        - /var/log/nginx/access_file.log

    histogram_buckets: [.0005, 0.01, 0.02, 0.05, 0.1, 0.2, 0.5, 1, 2, 5, 10, 20, 50, 100, 1000]

    metrics_override:
      prefix: "nginxlog"
    
    relabel_configs:
      - target_label: path
        from: request
        split: 2
        separator: " "
        matches:
        - regexp: "^([a-zA-Z_./-]*)/([0-9]+)/(.*)$"
          replacement: "$1/:id/$3"
        - regexp: "(.*)"
          replacement: "$1"
